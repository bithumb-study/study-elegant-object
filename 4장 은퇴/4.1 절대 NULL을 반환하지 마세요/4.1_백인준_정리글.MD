# 간략한 내용 정리

절대 NULL 을 반환 하지 마세요

- NULL 을 반환하는 일은 이 객체는 장애를 가지고있기 때문에 신뢰가 무너진다.
    - NullPointException 이 날수있기 때문에
    - 우리는 객체를 신뢰하기 때문에 객체는 자신의 행동을 책임지고 수행하여하고 우리가 간섭하지않는다. 하지만 NULL 을 가지고 있으면 소프트웨어에 대한 신뢰가 무너지고 유지보수에도 문제가 있게된다.
    - NULL 을 반환하는 메서드는 이해하기위해 더많은 시간이 필요하기 때문에 NULL 을 중복으로 체크한다.
    - null 을 반환하는 대신 예외를 던지는게 유지보수가 더쉽고 간결하다.

## 4.1.1 빠르게 실패하기 vs 안전하게 실패하기

소프트웨어 견고성과 실패 탄력회복성 관련한 두가지 철학이다.

- 안전하게 실패하기
    - 에러가 발생하는 상황에서도 소프트웨어를 생존하기 위해 노력하는 방법으로 그 일련의 과정으로 NULL 을 반환하는 것도 있다.
    - request 를 던질때 던진사람이 전적으로 잘못하여도 해당 상황을 구조하기 위해 노력한다.
- 빠르게 실패하기
    - 문제가 발생하면 곧빠르게 예외를 던져 상황을 종결시킨다.
    - 단위테스트에서 실패상황을 손쉽게 재현할수있고 문제를 간단히 수정할수있다.
    - 가능하면 실패를 분명하게 만들고 감추는 대신 강조 한다.
    - 이상황에서는 요청자는 버그를 수정할것이다.
    - 문제를 더빨리 발견할수록 문제를 더빨리 수정하면 소프트웨어는 더견고해진다.
    - 따라서 NULL 을 던지는 대신 예외를 처리하여야 한다.

## 4.1.2 NULL 의 대안

```java
public User user(String name){
        if(/*데이터베이스 발견못할시*/){
        return null;
        }
        return 값;
        }

```

- 위의 예는 데이터베이스에서 값을 찾지 못하면 null 을 반환하는 가장 흔한경우이다.
- 이런사고방식은 안전하게 실패하기와 유사한 방식이다.
-NULL 의 대안 방법
```java
public Collection<User> users(String name){
      if(/*데이터베이스 발견못할시*/){
        return new ArrayList<>(0);
      }
        return Collections.singleton(값);
        }
```
- null 대신 빈 리스트를 반환하는방법이있다.
- Optional 을 사용하는것은 반대한다. OOP 와 대립한다. 
  - user를 반환하지만 실제로 반환하는것은 사용자가아니라 사용자를 포함한 null 이다.
- 마지막방법은 null 객체 디자인패턴
  - 원하는 객체를 찾지 못하면 겉으로 보기에는 원래 객체 처럼 보이지만 실제로는 다르게 행동하는 객체를 반환한다.
  - 널 객체는 일부작업은 정상적으로 처리하지만 나머지 작업은 처리하지 않는다.

```java
class NullUser implements User {
  private final String label;

  NullUser(String name) {
    this.label = name;
  }

  @Override
  public String name() {
    return this.label;
  }
  @Override
  public void raise(Cash salary){
      throw new IllegalStateException(
              "~~~~~~"
      );
  }
}
```
NULL 을 절대 반환하지말아라

# 읽고 느낀점
- 오늘 또 느끼지만 이책은 너무 단호하게 말한다.
- 새로 만든 시스템에서는 모르지만 우리 회사 상황에서 빠르게 실패하기가 과연 괜찮을까라고 생각이든다.
  - 물론나는 빠르게 실패하는게 훨씬 문제를 찾기 쉽다는것을 알고 유지보수가 편하다고 생각하는 입장
- 안전하게 실패하기는 주먹구구식으로 돌려서 막아 유지보수하기 나중에 어렵고 리팩토링이 어렵다고 생각하지만
  - 급히 운영이슈가 발생할시에는 그렇게 했을수도 있을것 같다는 생각이 든다.
